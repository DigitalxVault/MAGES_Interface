---
phase: 02-sound-effects
plan: 02
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - src/components/SoundEffectsPanel.tsx
  - src/components/ui/configModal.tsx
autonomous: true

must_haves:
  truths:
    - "User can edit button names via input field"
    - "User can select audio file from dropdown"
    - "User can save configuration to localStorage"
    - "User can reset all buttons to defaults"
  artifacts:
    - path: "src/components/SoundEffectsPanel.tsx"
      provides: "Updated with config mode toggle"
      exports: ["SoundEffectsPanel"]
    - path: "src/components/ConfigModal.tsx"
      provides: "Modal for editing button configurations"
      exports: ["ConfigModal"]
  key_links:
    - from: "src/components/ConfigModal.tsx"
      to: "src/stores/appStore.ts"
      via: "useAppStore hook"
      pattern: "useAppStore\\(\\)"
---

<objective>
Create configuration UI for sound effect buttons

Purpose: Allow users to customize button names and assign audio files from the /public/sounds/effects/ folder. Configuration persists to localStorage automatically.

Output: Working configuration modal with name editing, file selection, and reset functionality
</objective>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
@.planning/phases/02-sound-effects/02-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ConfigModal component</name>
  <files>
    src/components/ConfigModal.tsx
  </files>
  <action>
    Create src/components/ConfigModal.tsx:
    - 'use client' directive
    - Props: isOpen, onClose
    - Import useAppStore for button state
    - Import MetalPanel, RivetButton
    - Modal overlay with centered panel
    - List all 10 buttons with:
      - Text input for button name
      - Dropdown for audio file selection
      - Shows currently assigned file
    - "Save & Close" button (closes modal, auto-saves to store)
    - "Reset to Defaults" button (calls resetSoundEffectButtons)
    - Responsive layout (scrollable on mobile)
    - Available files should be hardcoded list for now:
      ["door-knock.mp3", "footsteps.mp3", "tension.mp3", "success.mp3", "fail.mp3", "bell.mp3", "chime.mp3", "whoosh.mp3", "click.mp3", "notification.mp3"]
  </action>
  <verify>
    ConfigModal renders with 10 rows of inputs
    Each row has name input and file dropdown
    Save and Reset buttons present
    Modal has proper z-index overlay
  </verify>
  <done>
    ConfigModal component created
  </done>
</task>

<task type="auto">
  <name>Task 2: Add config mode to SoundEffectsPanel</name>
  <files>
    src/components/SoundEffectsPanel.tsx
  </files>
  <action>
    Update src/components/SoundEffectsPanel.tsx:
    - Add state for config modal: const [isConfigOpen, setIsConfigOpen] = useState(false)
    - Import ConfigModal component
    - Add "Configure" button in panel header (small RivetButton)
    - When clicked, opens ConfigModal with isOpen={isConfigOpen}
    - Modal calls onClose={() => setIsConfigOpen(false)}
    - Pass current button data to ConfigModal
    - Modal updates store directly via updateSoundEffectButton
  </action>
  <verify>
    "Configure" button visible in panel header
    Clicking opens ConfigModal
    Closing modal returns to normal view
  </verify>
  <done>
    Configuration mode added to SoundEffectsPanel
  </done>
</task>

</tasks>

<verification>
After all tasks complete:
1. SoundEffectsPanel has "Configure" button in header
2. Clicking "Configure" opens modal with 10 button configurations
3. Each row shows: current name (editable), file dropdown
4. Changing name updates the button label in real-time
5. Selecting a file assigns it to the button
6. "Save & Close" closes modal (changes already saved to store)
7. "Reset to Defaults" resets all buttons to "Effect 1" etc.
8. Changes persist after page refresh
</verification>

<success_criteria>
- ConfigModal opens from SoundEffectsPanel
- Name editing works with real-time updates
- File dropdown assigns audio to buttons
- Reset functionality restores defaults
- localStorage persistence works automatically via Zustand
- Modal is responsive on mobile
</success_criteria>

<output>
After completion, create `.planning/phases/02-sound-effects/02-02-SUMMARY.md`
</output>
