---
phase: 02-sound-effects
plan: 01
type: execute
wave: 2
depends_on: ["01-02"]
files_modified:
  - src/components/SoundEffectsPanel.tsx
  - src/stores/appStore.ts
  - src/components/MainInterface.tsx
  - public/sounds/effects/.gitkeep
autonomous: true

must_haves:
  truths:
    - "User sees 10 sound effect buttons in a grid layout"
    - "Tapping a button plays its assigned sound instantly (no delay)"
    - "Volume slider adjusts all sound effect playback levels"
    - "Sound effects use one-shot playback (stop when complete)"
  artifacts:
    - path: "src/components/SoundEffectsPanel.tsx"
      provides: "10-button sound effects grid with instant playback"
      exports: ["SoundEffectsPanel"]
    - path: "src/stores/appStore.ts"
      provides: "Sound effect button state with localStorage persistence"
      exports: ["useAppStore"]
    - path: "public/sounds/effects/"
      provides: "Placeholder folder for effect audio files"
  key_links:
    - from: "src/components/SoundEffectsPanel.tsx"
      to: "use-sound"
      via: "useSound hook"
      pattern: "useSound\\("
    - from: "src/components/SoundEffectsPanel.tsx"
      to: "src/stores/appStore.ts"
      via: "useAppStore hook"
      pattern: "useAppStore\\(\\)"
---

<objective>
Create 10-button sound effects panel with instant playback and volume control

Purpose: Provide game masters with quick access to common sound effects (door knocks, footsteps, tension stings, etc.) during board game sessions. Each button plays immediately on tap with no loading delay.

Output: Working sound effects panel with 10 buttons, volume slider, and localStorage-persisted button configurations
</objective>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
@.planning/phases/01-foundation/01-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create sound effects store state</name>
  <files>
    src/stores/appStore.ts
  </files>
  <action>
    Update src/stores/appStore.ts:
    - Add SoundEffectButton interface:
      - id: string (1-10)
      - name: string (default "Effect 1", "Effect 2", etc.)
      - soundFile: string (default empty for unassigned)
    - Add soundEffectButtons array to state (10 buttons with defaults)
    - Add actions:
      - updateSoundEffectButton(id: string, updates: Partial<SoundEffectButton>)
      - resetSoundEffectButtons()
    - Persist soundEffectButtons to localStorage
    - Keep existing musicVolume and effectsVolume
  </action>
  <verify>
    TypeScript compiles without errors
    SoundEffectButtons type is properly defined
    Default names are "Effect 1" through "Effect 10"
    soundFile defaults to empty string
  </verify>
  <done>
    Sound effects button state added to store with localStorage persistence
  </done>
</task>

<task type="auto">
  <name>Task 2: Create SoundEffectsPanel component</name>
  <files>
    src/components/SoundEffectsPanel.tsx
  </files>
  <action>
    Create src/components/SoundEffectsPanel.tsx:
    - 'use client' directive
    - Import useSound from 'use-sound'
    - Import useAppStore for volume control
    - Import MetalPanel, RivetButton
    - Create 2x5 responsive grid layout (grid-cols-2 sm:grid-cols-5)
    - Each sound button:
      - Shows button name (default "Effect 1", etc.)
      - Plays sound on tap using useSound hook
      - Has visual feedback on tap (active state)
      - Shows indicator if sound is assigned
    - Volume slider at bottom:
      - Range input 0-1, step 0.1
      - Connected to effectsVolume from store
      - Shows current volume percentage
    - Use Howl options: { volume: effectsVolume, html5: true } for instant playback
  </action>
  <verify>
    SoundEffectsPanel renders 10 buttons in 2x5 grid
    Volume slider at bottom of panel
    Buttons are large enough to tap (min-h-[64px])
    Layout responsive on mobile/tablet
  </verify>
  <done>
    SoundEffectsPanel component with grid layout and volume control
  </done>
</task>

<task type="auto">
  <name>Task 3: Create placeholder sounds folder</name>
  <files>
    public/sounds/effects/.gitkeep
  </files>
  <action>
    Create public/sounds/effects/.gitkeep:
    - Empty file to ensure folder is tracked by git
    - Folder will be populated with actual audio files later
    - Include README.md with format guidance (MP3/OGG recommended)
  </action>
  <verify>
    Folder structure exists
  </verify>
  <done>
    Placeholder sounds folder created
  </done>
</task>

<task type="auto">
  <name>Task 4: Integrate SoundEffectsPanel into MainInterface</name>
  <files>
    src/components/MainInterface.tsx
  </files>
  <action>
    Update src/components/MainInterface.tsx:
    - Import SoundEffectsPanel
    - Replace the "SOUND EFFECTS" placeholder panel
    - Use SoundEffectsPanel component instead of "Coming soon..." text
    - Keep other 3 panels (DICE, TIMER, BACKGROUND MUSIC) as placeholders
  </action>
  <verify>
    MainInterface shows SoundEffectsPanel in place of placeholder
    Other 3 panels remain as "Coming soon..."
  </verify>
  <done>
    SoundEffectsPanel integrated into main interface
  </done>
</task>

</tasks>

<verification>
After all tasks complete:
1. MainInterface shows SoundEffectsPanel in the SOUND EFFECTS section
2. 10 buttons display in 2x5 grid layout
3. Each button shows "Effect 1" through "Effect 10" labels
4. Volume slider at bottom controls playback volume
5. Tapping a button attempts to play (will show error if no audio file assigned - expected)
6. Button configurations persist to localStorage
7. Responsive layout adapts to mobile/tablet
8. All touch targets are â‰¥48dp
</verification>

<success_criteria>
- 10 buttons render in grid layout
- Volume slider controls effects volume
- useSound hook integrated for instant playback
- Button configurations persist to localStorage
- Responsive 2x5 grid (mobile) to 5x2 (tablet) layout
- Industrial styling matches design system
</success_criteria>

<output>
After completion, create `.planning/phases/02-sound-effects/02-01-SUMMARY.md`
</output>
